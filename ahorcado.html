<!DOCTYPE html>
<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">



    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    .container {
        height: 100vh;
        overflow: hidden;
    }

    .imagencolgado {
        height: 60vh;
    }

    .lineas {
        font-size: 25px;
    }
</style>

<body>



    <div class="container">
        <div class="row">
            <div class="col-sm">
                <h1>EL AHORCADO</h1>
                <p> Hola, este es el juego del ahorcado, aquí debes escribir una letra y ver si le achuntas.</p>
            </div>
        </div>

        <div class="row">
            <div class="col-3">
                <div class="row">
                    <label for="ex1">Escribe acá una letra</label>
                    <p> <input class="form-control type=" text" maxlength="1" id="entrada" onkeydown="if (event.keyCode == 13)
                    document.getElementById('botoncomprobacion').click()"> </p>
                    <p> <button class="btn btn-success" onclick="comprobar()" id="botoncomprobacion">Click acá para
                            comprobar</button></p>
                    <span id="alerta"></span>
                </div>


                <div class="row">
                    <div class="col">
                        <p id="lineas" class="lineas"></p>
                        <p id="puntajeTotal"> </p>
                        <p id="vidas"> </p>
                    </div>
                </div>
            </div>
            <div class="col-9">
                <img src="ahorcado.jpg" alt="Dibujo de un ahorcado." id="imagencolgado" class="img-fluid imagencolgado">
            </div>


        </div>
    </div>


</body>


<script>

    var porMostrar = ""
    var algoque = {
        puntajeTotal: 0,
        puntajeActual: 0,
        palabra: "paralelepipedo",
        letras: this.length,
        restantes: this.letras,
        vidas: 3,
        mostrado: porMostrar,
        saturacion: 5,
    }

    var palabra = "paralelepipedo"

    function datosconstructor(entrada) {
        this.puntajeTotal = 0;
        this.puntajeActual = 0;
        this.palabra = "paralelepipedo";
        this.letras = this.length;
        this.restantes = this.letras;
        this.vidas = 5;
        this.mostrado = funcionprueba();
        this.saturacion = 5;
    }

    var estejuego = new datosconstructor();


    function funcionprueba() {
        var porMostrar = ""
        for (var i = 0; i < palabra.length; i++) {
            porMostrar += "_ "
        }
        return porMostrar

    }

    document.getElementById("lineas").innerHTML = estejuego.mostrado;




    var imagencolgado = document.getElementById("imagencolgado");

    function comprobar() {
        var entrada = document.getElementById("entrada").value;
        var trabajando = "";
        var posicion = 0;
        var puntajeActual = 0;
        var puntajeAhora = estejuego.puntajeTotal
        for (letra of estejuego.palabra) {
            if (letra == entrada && !(estejuego.mostrado.includes(letra))) {
                trabajando += (letra + " ");
                puntajeActual += 1;
            }
            else {
                trabajando += estejuego.mostrado[posicion * 2] + " ";
            }
            posicion += 1

        }
        estejuego.puntajeTotal += puntajeActual;

        if (puntajeAhora == estejuego.puntajeTotal) {
            estejuego.vidas--
            estejuego.saturacion += (estejuego.saturacion ** 2)
            imagencolgado.style.filter = "saturate(" + estejuego.saturacion + "%)";
            document.getElementById("alerta").innerHTML = '<div class="alert alert-danger" role="alert">Has perdido una vida, ahora solo te quedan ' + estejuego.vidas + ' vidas.</div>'
        }
        else {
            document.getElementById("alerta").innerHTML = '<div class="alert alert-success" role="alert">Has acertado, obtuviste ' + puntajeActual + ' puntos.</div>'
        }
        estejuego.mostrado = trabajando;
        console.log(trabajando);
        document.getElementById("lineas").innerHTML = trabajando;
        document.getElementById("puntajeTotal").innerHTML = "Tienes " + estejuego.puntajeTotal + " puntos en total.";


        if (estejuego.vidas == 0) {
            // Swal.fire('Oops...', 'Fracasaste como en tu vida', 'error')
            alertar()
        }

    }
    let root = document.querySelector('.imagencolgado');

    root.style.setProperty('saturacion', 100);

    function alertar() {
        Swal.fire({
            title: 'FRACASASTE \n COMO EN TU VIDA',
            text: '¿Qué quieres hacer?',
            icon: 'error',
            showCancelButton: true,
            confirmButtonText: 'Reiniciar',
            cancelButtonText: 'Seguir jugando'
        }).then((result) => {
            if (result.value) {
                reiniciar()
                Swal.fire(
                    '¡Reiniciado!',
                    'Ahora puedes volver a fracasar.',
                    'success'
                )
                // For more information about handling dismissals please visit
                // https://sweetalert2.github.io/#handling-dismissals
            } else if (result.dismiss === Swal.DismissReason.cancel) {
                Swal.fire(
                    'Puedes continuar',
                    '¿Hasta dónde llegará tu fracaso?',
                    'error'
                )
            }
        })
    }

    function reiniciar() {
        estejuego = new datosconstructor()
        imagencolgado.style.filter = "saturate(" + estejuego.saturacion + "%)";
        document.getElementById("alerta").innerHTML = ""
        document.getElementById("lineas").innerHTML = estejuego.mostrado;
        document.getElementById("puntajeTotal").innerHTML = "Tienes " + estejuego.puntajeTotal + " puntos en total.";

    }

</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

</html>